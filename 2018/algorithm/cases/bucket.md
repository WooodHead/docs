# Buctket Algorithm

```
    有1000张订单如何分配给不同的供应商
    
    水位算法 ： 按权重排列顺序，权重之和为最小容积和，水箱为总量，原则是每次流出
    的都是最小容积和【10 = 4（A银行权重）+4（B银行权重）+2（C银行权重）】，这样A
    桶（直径4）装完会打开通流阀，多的会流向B通（直径4），当也装满后会流向C，都装
    满后重新会填充A
    在数据上使用循环链表+链表中每个节点使用数组
    数组满了之后，新的进来，把清空数组理解为驱动业务匹配完成，最后桶里的一滴水完
    成清空整个链表的工作
    如何记录最后一滴，可以用漏洞倒计时1000--
    
    FAQ：
    A:
    在某些情况下这些订单一直流不到１号桶，　但２　３　号桶满了，　像这种情况如何处理？
    我的理解是，等全满后清空，多余自身容积的，留至少次的分配。
    Q: 
    如果是链表结构的话，2,3满了，正常的情况下会循环到1，那么1在此之前是满的，什么
    情况导致它不能清空，存放新的订单
    如果确实有，也就是说链表中的每个节点是否都有这种情况会发生？
    A：
    1并没满， 因为一些规则流不到它的身上。 会有， 因为每次匹配的银行是不一致的。
    Q:
    明白了，也就是说，银行不是对等的，是动态集合
    A：
    Q：
    嗯，但还要满足这种分配的原则。
    是否可以，这样处理，链表中的节点是银行的全集，每个节点设置溢水位和有效期，
    清空处理条件可以是：1.超时 2.超过水位
    A：
    首先不存在超时情况， 因为它是循环进入。 2. 如果超过水位就清空，那就保证不了
    整体的流入比例了，对不对？
    实现是没问题的，让技术实现就好，我设计出来就行了
    我设计了一套打分规则,使用权重
```

